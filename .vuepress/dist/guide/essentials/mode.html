<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>了解 Guard 模式 | Authing Guard 文档</title><meta name="generator"content="VuePress 1.9.9"><link rel="icon"href="https://authing.cn/favicon.ico"><meta name="description"content="Authing Guard 文档"><link rel="preload"href="/packages/guard/doc/assets/css/0.styles.aa5033b4.css"as="style"><link rel="preload"href="/packages/guard/doc/assets/js/app.8e1fb774.js"as="script"><link rel="preload"href="/packages/guard/doc/assets/js/5.055bb98d.js"as="script"><link rel="preload"href="/packages/guard/doc/assets/js/6.aae15fb4.js"as="script"><link rel="preload"href="/packages/guard/doc/assets/js/10.72420de5.js"as="script"><link rel="preload"href="/packages/guard/doc/assets/js/3.94eb52bd.js"as="script"><link rel="stylesheet"href="/packages/guard/doc/assets/css/0.styles.aa5033b4.css"></head><body><div id="app"data-server-rendered="true"><div class="theme-container"><div class="vue-notification-group"style="width:300px;top:0px;left:calc(50% - 150px);"></div><header class="navbar fixed-header"><div class="navbar-container content-layout-container"><div class="nav-bar-logo-container"><a href="https://docs.authing.cn"class="nav-bar-new-logo"><img src="https://files.authing.co/authing-console/authing-logo-new-20210924.svg"alt="Authing Guard 文档"class="logo"></a><a href="https://docs.authing.cn/v2/"class="home-link"><span class="site-name">Web Guard</span></a></div><div class="links can-hide"><nav class="nav-links can-hide"><div class="nav-item"><a href="/packages/guard/doc/guide/"class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/packages/guard/doc/plugin/"class="nav-link">插件</a></div><div class="nav-item"><a href="https://cdn.authing.co/packages/guard/ui/index.html"rel="noopener noreferrer"class="nav-link external">在线体验</a></div><div class="nav-item"><a href="https://forum.authing.cn"rel="noopener noreferrer"class="nav-link external">社区</a></div><div class="nav-item"><a href="https://www.authing.cn/blog"rel="noopener noreferrer"class="nav-link external">博客</a></div><div class="nav-item"><a href="/packages/guard/doc/about/releases.html"class="nav-link">更新日志</a></div><div class="nav-item"><a href="/packages/guard/doc/about/introduce.html"class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/authing/guard"rel="noopener noreferrer"class="nav-link external">GitHub</a></div></nav><select class="version-selector"><option selected="selected"value="6.0.0-alpha.12">6.0.0-alpha.12</option><option value="5.x">5.x</option><option value="4.x">4.x</option></select></div><div class="authing-search-box"><input aria-label="Search"placeholder="输入关键字搜索"autocomplete="off"spellcheck="false"value=""></div><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"role="img"viewBox="0 0 448 512"class="icon"></svg></div></div></header><main class="page content-layout-container"><div class="main-content"><aside class="sidebar"><ul class="sidebar-links"><li data-index="0"><section class="sidebar-group depth-0"data-v-079073a6><p class="sidebar-heading"data-v-079073a6><span class="arrow right-arrow"style="display:none;"data-v-079073a6><img src="/packages/guard/doc/assets/img/arrow-right-s-fill.c2e17522.svg"data-v-079073a6></span><span class="sidebar-heading__title"data-v-079073a6>使用指南</span></p><ul class="sidebar-links sidebar-group-items"data-v-079073a6 data-v-079073a6><li data-index="0-0"><a href="/packages/guard/doc/guide/"aria-current="page"class="sidebar-link">介绍</a></li><li data-index="0-1"><a href="/packages/guard/doc/guide/install.html"class="sidebar-link">安装</a></li><li data-index="0-2"><a href="/packages/guard/doc/guide/quick-start.html"class="sidebar-link">快速开始</a></li><li data-index="0-3"><a href="/packages/guard/doc/guide/config.html"class="sidebar-link">初始配置</a></li><li data-index="0-4"><a href="/packages/guard/doc/guide/types.html"class="sidebar-link">类型定义</a></li></ul></section></li><li data-index="1"><section class="sidebar-group depth-0"data-v-079073a6><p class="sidebar-heading open"data-v-079073a6><span class="arrow down-arrow"style="display:none;"data-v-079073a6><img src="/packages/guard/doc/assets/img/arrow-down-s-fill.4c17f7bf.svg"data-v-079073a6></span><span class="sidebar-heading__title"data-v-079073a6>基础</span></p><ul class="sidebar-links sidebar-group-items"data-v-079073a6 data-v-079073a6><li><a href="https://docs.authing.cn/v2/guides/app-new/create-app/create-app.html"target="_blank"rel="noopener noreferrer"class="sidebar-link">创建一个 Authing 应用<span><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"focusable="false"x="0px"y="0px"viewBox="0 0 100 100"width="15"height="15"class="icon outbound"></svg> <span class="sr-only">(opens new window)</span></span></a></li><li data-index="1-1"><a href="/packages/guard/doc/guide/essentials/mode.html"aria-current="page"class="active sidebar-link">了解 Guard 使用模式</a></li><li data-index="1-2"><a href="/packages/guard/doc/guide/essentials/console-local-relationship.html"class="sidebar-link">控制台配置与本地配置</a></li></ul></section></li><li data-index="2"><section class="sidebar-group depth-0"data-v-079073a6><p class="sidebar-heading"data-v-079073a6><span class="arrow right-arrow"style="display:none;"data-v-079073a6><img src="/packages/guard/doc/assets/img/arrow-right-s-fill.c2e17522.svg"data-v-079073a6></span><span class="sidebar-heading__title"data-v-079073a6>API</span></p><ul class="sidebar-links sidebar-group-items"data-v-079073a6 data-v-079073a6><li data-index="2-0"><a href="/packages/guard/doc/guide/essentials/login.html"class="sidebar-link">登录</a></li><li data-index="2-1"><a href="/packages/guard/doc/guide/essentials/logout.html"class="sidebar-link">登出</a></li><li data-index="2-2"><a href="/packages/guard/doc/guide/essentials/trackSession.html"class="sidebar-link">获取用户信息</a></li><li data-index="2-3"><a href="/packages/guard/doc/guide/essentials/change-view.html"class="sidebar-link">切换视图</a></li><li data-index="2-4"><a href="/packages/guard/doc/guide/essentials/events.html"class="sidebar-link">事件</a></li><li data-index="2-5"><a href="/packages/guard/doc/guide/essentials/change-language.html"class="sidebar-link">切换语言</a></li><li data-index="2-6"><a href="/packages/guard/doc/guide/essentials/change-content-css.html"class="sidebar-link">自定义样式</a></li><li data-index="2-7"><a href="/packages/guard/doc/guide/essentials/refresh-token.html"class="sidebar-link">刷新 Token</a></li><li data-index="2-8"><a href="/packages/guard/doc/guide/essentials/agreemetns.html"class="sidebar-link">操作登录注册协议</a></li></ul></section></li><li data-index="3"><section class="sidebar-group depth-0"data-v-079073a6><p class="sidebar-heading"data-v-079073a6><span class="arrow right-arrow"style="display:none;"data-v-079073a6><img src="/packages/guard/doc/assets/img/arrow-right-s-fill.c2e17522.svg"data-v-079073a6></span><span class="sidebar-heading__title"data-v-079073a6>高级功能</span></p><ul class="sidebar-links sidebar-group-items"data-v-079073a6 data-v-079073a6><li data-index="3-0"><a href="/packages/guard/doc/guide/essentials/js-sdk.html"class="sidebar-link">使用 JS SDK</a></li><li data-index="3-1"><a href="/packages/guard/doc/guide/essentials/sso.html"class="sidebar-link">SSO 单点登录</a></li><li data-index="3-2"><a href="/packages/guard/doc/guide/essentials/social.html"class="sidebar-link">第三方身份源登录</a></li><li data-index="3-3"><a href="/packages/guard/doc/guide/essentials/mfa.html"class="sidebar-link">MFA 多因素认证</a></li><li data-index="3-4"><a href="/packages/guard/doc/guide/essentials/safe-domain.html"class="sidebar-link">配置安全域</a></li><li data-index="3-5"><a href="/packages/guard/doc/guide/essentials/privatization.html"class="sidebar-link">私有化部署</a></li></ul></section></li></ul></aside><div class="breadcrumb-content-container"><div class="theme-default-content content__default"><h1 id="了解-guard-模式"><a href="#了解-guard-模式"class="header-anchor">¶</a> 了解 Guard 模式</h1><h2 id="托管模式-内嵌模式"><a href="#托管模式-内嵌模式"class="header-anchor">¶</a> 托管模式 &amp; 内嵌模式</h2><p><strong>托管模式：</strong> 指跳转到 Authing 提供的托管登录页。Authing 默认使用 OIDC 标准协议认证，你的用户在登录时将始终由 Authing 提供的认证最佳实践保驾护航。</p><ul><li>安全性：你的业务系统将用户重定向到 Authing，用户在此进行身份验证，然后重定向回在控制台配置的应用回调连接。</li><li>样式丰富性：托管模式提供了登录注册表单自定义配置，可通过控制台配置和 CSS 进行界面自定义。</li><li>集成便利性：你不需要额外运维登录页面，Authing 将负责此页面的维护和升级，当 Authing 有新功能发布之后，你不需要做任何操作即可获取最新能力。</li></ul><p><strong>内嵌模式：</strong> 指的是将 Authing 提供的登录组件（Guard）嵌入到你的 Web 应用中。仅需要几行 JavaScript 代码即可，该模式包含两种形态：</p><ul><li>普通形态：样式与托管模式一致，但灵活之处在于你可以将它嵌入到你的任意的 DOM 节点。</li><li>模态框形态：和普通形态类似，只不过通过模态框（Modal）的样式进行展示。</li></ul><p><strong>对于大多数登录认证场景，我们推荐使用「托管模式」进行集成。这是最简便、安全、通用的 Authing 认证最佳实践。</strong></p><h2 id="使用托管模式"><a href="#使用托管模式"class="header-anchor">¶</a> 使用托管模式</h2><div class="custom-block hint-info"><p>使用托管模式会涉及到路由跳转，Safari、Firefox 等浏览器默认开启『阻止跨站跟踪』，导致 Cookie 无法有效传输，推荐使用 Chrome 浏览器。目前已有解决方案，我们接下来会修复这个问题。</p></div><p>托管模式将跳转到 Authing 提供的托管登录页。由于此模式 Authing 默认使用 OIDC 标准协议认证，你需要进行以下额外配置：</p><ul><li>在 <a href="https://console.authing.cn"target="_blank"rel="noopener noreferrer">Authing 控制台<span><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"focusable="false"x="0px"y="0px"viewBox="0 0 100 100"width="15"height="15"class="icon outbound"></svg> <span class="sr-only">(opens new window)</span></span></a> 的 <strong>应用 -&gt; 自建应用 -&gt; 应用详情</strong> 中配置 <strong>登录回调 URL</strong>，回调地址为下述示例代码中 Callback 页面地址，此处以 <code>http://localhost:3000/callback</code> 为例：</li></ul><p><img src="/packages/guard/doc/assets/img/guard-console-login-redirect-url.919ce6d1.png"alt="guard-console-login-redirect-url"></p><ul><li>在应用详情的 <strong>协议配置 -&gt; 授权配置</strong> 中，<strong>授权模式</strong> 选择 <strong>authentication_code</strong>，<strong>返回类型</strong> 选择 <strong>code</strong>:</li></ul><p><img src="/packages/guard/doc/assets/img/guard-console-authentication-config.90f6fc60.png"alt="guard-console-authentication-config"></p><ul><li>如果是标准 Web 应用，请在应用详情的 <strong>协议配置 -&gt; 授权配置</strong> 中，请确保应用的 <strong>换取 token 身份验证方式</strong> 设置为了 <strong>none</strong>。</li></ul><div class="custom-block hint-info"><p>如果你的应用类型为单页 Web 应用，此次选项会被隐藏，为正常情况。</p></div><p><img src="/packages/guard/doc/assets/img/guard-console-identify-verify-mode.ebdef82b.png"alt="guard-console-identify-verify-mode"></p><h3 id="guard-托管模式代码示例"><a href="#guard-托管模式代码示例"class="header-anchor">¶</a> Guard 托管模式代码示例</h3><div class="tabs-component"><div class="tabs-component-panels"><section aria-hidden="true"id="react"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// Jump.tsx</span>

<span class="token comment">// React16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/normal/src/pages/Jump.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/normal/src/pages/Jump.tsx</span>
<span class="token comment">// import { useGuard } from '@authing/guard-react18';</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 跳转到 Authing 托管页面登录</span>
  <span class="token keyword">const</span> <span class="token function-variable function">startWithRedirect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> guard<span class="token punctuation">.</span><span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>startWithRedirect<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Start With Redirect
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// Callback.tsx</span>

<span class="token comment">// React 16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/normal/src/pages/Callback.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> JwtTokenStatus<span class="token punctuation">,</span> useGuard<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-react'</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/normal/src/pages/Callback.tsx</span>
<span class="token comment">// import { JwtTokenStatus, useGuard, User } from '@authing/guard-react18';</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 触发 guard.handleRedirectCallback() 方法完成登录认证</span>
      <span class="token comment">// 用户认证成功之后，我们会将用户的身份凭证存到浏览器的本地缓存中</span>
      <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">handleRedirectCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// 2. 处理完 handleRedirectCallback 之后，你需要先检查用户登录态是否正常</span>
      <span class="token keyword">const</span> loginStatus<span class="token operator">:</span> JwtTokenStatus <span class="token operator">|</span> <span class="token keyword">undefined</span>  <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">checkLoginStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loginStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard is not get login status'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 3. 获取到登录用户的用户信息</span>
      <span class="token keyword">const</span> userInfo<span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>

      <span class="token comment">// 你也可以重定向到你的任意业务页面，比如重定向到用户的个人中心</span>
      <span class="token comment">// 如果你希望实现登录后跳转到同一页面的效果，可以通过在调用 startWithRedirect 时传入的自定义 state 实现</span>
      <span class="token comment">// 之后你在这些页面可以通过 trackSession 方法获取用户登录态和用户信息</span>

      <span class="token comment">// 示例一：跳转到固定页面</span>
      history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/personal'</span><span class="token punctuation">)</span>

      <span class="token comment">// 示例二：获取自定义 state，进行特定操作</span>
      <span class="token comment">// const search = window.location.search</span>
      <span class="token comment">// 从 URL search 中解析 state</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 登录失败，推荐再次跳转到登录页面</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard handleAuthingLoginCallback error: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">handleCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">This is Callback page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// Personal.tsx</span>

<span class="token comment">// React 16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/normal/src/pages/Personal.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-react'</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/normal/src/pages/Personal.tsx</span>
<span class="token comment">// import { useGuard, User } from '@authing/guard-react18';</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Personal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>userInfo<span class="token punctuation">,</span> setUserInfo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setUserInfo</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>userInfo <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">用户信息：</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">cols</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">}</span></span> <span class="token attr-name">rows</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">30</span><span class="token punctuation">}</span></span> <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>userInfo<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="vue2"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/normal/src/views/Jump.vue</span>
<span class="token comment">// Jump.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 跳转到 Authing 托管页面登录</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/normal/src/views/Callback.vue</span>
<span class="token comment">// Callback.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'This is callback page ~'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleAuthingLoginCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">handleAuthingLoginCallback</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. 触发 guard.handleRedirectCallback() 方法完成登录认证</span>
        <span class="token comment">// 用户认证成功之后，我们会将用户的身份凭证存到浏览器的本地缓存中</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">handleRedirectCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 2. 处理完 handleRedirectCallback 之后，你需要先检查用户登录态是否正常</span>
        <span class="token keyword">const</span> loginStatus <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">checkLoginStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loginStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard is not get login status'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 3. 获取到登录用户的用户信息</span>
        <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>

        <span class="token comment">// 你也可以重定向到你的任意业务页面，比如重定向到用户的个人中心</span>
        <span class="token comment">// 如果你希望实现登录后跳转到同一页面的效果，可以通过在调用 startWithRedirect 时传入的自定义 state 实现</span>
        <span class="token comment">// 之后你在这些页面可以通过 trackSession 方法获取用户登录态和用户信息</span>
        <span class="token comment">// 示例一：跳转到固定页面</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/personal'</span><span class="token punctuation">)</span>
        <span class="token comment">// 示例二：获取自定义 state，进行特定操作</span>
        <span class="token comment">// const search = window.location.search</span>
        <span class="token comment">// 从 URL search 中解析 state</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 登录失败，推荐再次跳转到登录页面</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard handleAuthingLoginCallback error: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>personal-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/normal/src/views/Personal.vue --&gt;</span>
    <span class="token comment">&lt;!-- Personal.vue --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">getUserInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="vue3"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/normal/src/views/Jump.vue</span>
<span class="token comment">// Jump.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue3&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">startWithRedirect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 跳转到 Authing 托管页面登录</span>
  guard<span class="token punctuation">.</span><span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>personal-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/normal/src/views/Callback.vue --&gt;</span>
    <span class="token comment">&lt;!-- Callback.vue --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-vue3'</span>

<span class="token keyword">import</span> type <span class="token punctuation">{</span> JwtTokenStatus<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-vue3'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleAuthingLoginCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 触发 guard.handleRedirectCallback() 方法完成登录认证</span>
    <span class="token comment">// 用户认证成功之后，我们会将用户的身份凭证存到浏览器的本地缓存中</span>
    <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">handleRedirectCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 2. 处理完 handleRedirectCallback 之后，你需要先检查用户登录态是否正常</span>
    <span class="token keyword">const</span> <span class="token literal-property property">loginStatus</span><span class="token operator">:</span> JwtTokenStatus <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">checkLoginStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loginStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard is not get login status'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 3. 获取到登录用户的用户信息</span>
    <span class="token keyword">const</span> <span class="token literal-property property">userInfo</span><span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>

    <span class="token comment">// 你也可以重定向到你的任意业务页面，比如重定向到用户的个人中心</span>
    <span class="token comment">// 如果你希望实现登录后跳转到同一页面的效果，可以通过在调用 startWithRedirect 时传入的自定义 state 实现</span>
    <span class="token comment">// 之后你在这些页面可以通过 trackSession 方法获取用户登录态和用户信息</span>
    <span class="token comment">// 示例一：跳转到固定页面</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Personal'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 示例二：获取自定义 state，进行特定操作</span>
    <span class="token comment">// const search = window.location.search</span>
    <span class="token comment">// 从 URL search 中解析 state</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 登录失败，推荐再次跳转到登录页面</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard handleAuthingLoginCallback error: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">handleAuthingLoginCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>personal-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/normal/src/views/Personal.vue --&gt;</span>
    <span class="token comment">&lt;!-- Personal.vue --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-vue3'</span>

<span class="token keyword">import</span> type <span class="token punctuation">{</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-vue3'</span>

<span class="token keyword">const</span> userInfo <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">getUserInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token literal-property property">_userInfo</span><span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  userInfo<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>_userInfo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="angular"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/normal/src/app/pages/jump/jump.component.ts</span>
<span class="token comment">// jump.component.ts</span>
<span class="token comment">// Angular 组件中使用 Guard API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-angular&quot;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">&quot;jump-container&quot;</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">&quot;./jump.component.html&quot;</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./jump.component.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HomeComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token comment">// 使用 Angular 依赖注入，获取 Guard 实例</span>
    <span class="token keyword">private</span> guard<span class="token operator">:</span> GuardService
  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 跳转到 Authing 托管页面登录</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/normal/src/app/pages/callback/callback.component.ts</span>
<span class="token comment">// callback.component.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardService<span class="token punctuation">,</span> JwtTokenStatus<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-angular'</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'callback-container'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./callback.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./callback.component.css'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CallbackComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span>
    <span class="token keyword">private</span> router<span class="token operator">:</span> Router<span class="token punctuation">,</span>
    <span class="token keyword">private</span> guard<span class="token operator">:</span> GuardService
  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleAuthingLoginCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">handleAuthingLoginCallback</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 触发 guard.handleRedirectCallback() 方法完成登录认证</span>
      <span class="token comment">// 用户认证成功之后，我们会将用户的身份凭证存到浏览器的本地缓存中</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">handleRedirectCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// 2. 处理完 handleRedirectCallback 之后，你需要先检查用户登录态是否正常</span>
      <span class="token keyword">const</span> loginStatus<span class="token operator">:</span> JwtTokenStatus <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">checkLoginStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loginStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard is not get login status'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 3. 获取到登录用户的用户信息</span>
      <span class="token keyword">const</span> userInfo<span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>

      <span class="token comment">// 你也可以重定向到你的任意业务页面，比如重定向到用户的个人中心</span>
      <span class="token comment">// 如果你希望实现登录后跳转到同一页面的效果，可以通过在调用 startWithRedirect 时传入的自定义 state 实现</span>
      <span class="token comment">// 之后你在这些页面可以通过 trackSession 方法获取用户登录态和用户信息</span>

      <span class="token comment">// 示例一：跳转到固定页面</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigateByUrl</span><span class="token punctuation">(</span><span class="token string">'personal'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        replaceUrl<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 示例二：获取自定义 state，进行特定操作</span>
      <span class="token comment">// const search = window.location.search</span>
      <span class="token comment">// 从 URL search 中解析 state</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 登录失败，推荐再次跳转到登录页面</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard handleAuthingLoginCallback error: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/normal/src/app/pages/personal/personal.component.ts</span>
<span class="token comment">// personal.component.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardService<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@authing/guard-angular'</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'personal-container'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./personal.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./personal.component.css'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PersonalComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> guard<span class="token operator">:</span> GuardService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  userInfo <span class="token operator">=</span> <span class="token string">''</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> _userInfo<span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>_userInfo <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="cdn"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard/normal/jump.html</span>
<span class="token comment">// jump.html</span>
<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuardFactory<span class="token punctuation">.</span>Guard</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 你可以前往 Authing 控制台的本应用详情页查看你的 App ID</span>
  <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>

  <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
  <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

  <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
  <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
  <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 跳转到 Authing 托管页面登录</span>
  guard<span class="token punctuation">.</span><span class="token function">startWithRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard/normal/callback.html</span>
<span class="token comment">// callback.html</span>
<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuardFactory<span class="token punctuation">.</span>Guard</span><span class="token punctuation">(</span>guardOptions<span class="token punctuation">)</span>

<span class="token function">handleAuthingLoginCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleAuthingLoginCallback</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 触发 guard.handleRedirectCallback() 方法完成登录认证</span>
    <span class="token comment">// 用户认证成功之后，我们会将用户的身份凭证存到浏览器的本地缓存中</span>
    <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">handleRedirectCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 2. 处理完 handleRedirectCallback 之后，你需要先检查用户登录态是否正常</span>
    <span class="token keyword">const</span> loginStatus <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">checkLoginStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loginStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard is not get login status'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. 获取到登录用户的用户信息</span>
    <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>

    <span class="token comment">// 你也可以重定向到你的任意业务页面，比如重定向到用户的个人中心</span>
    <span class="token comment">// 如果你希望实现登录后跳转到同一页面的效果，可以通过在调用 startWithRedirect 时传入的自定义 state 实现</span>
    <span class="token comment">// 之后你在这些页面可以通过 trackSession 方法获取用户登录态和用户信息</span>

    <span class="token comment">// 示例一：跳转到固定页面</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>personalPageUrl<span class="token punctuation">)</span>

    <span class="token comment">// 示例二：获取自定义 state，进行特定操作</span>
    <span class="token comment">// const search = window.location.search</span>
    <span class="token comment">// 从 URL search 中解析 state</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 登录失败，推荐再次跳转到登录页面</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Guard handleAuthingLoginCallback error: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Authing Guard Demo - Personal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.authing.co/packages/guard/latest/guard.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.authing.co/packages/face-api/face-api.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./config.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.authing.co/packages/guard/latest/guard.min.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard/normal/personal.html --&gt;</span>
  <span class="token comment">&lt;!-- personal.html --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>Get User Info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuardFactory<span class="token punctuation">.</span>Guard</span><span class="token punctuation">(</span>guardOptions<span class="token punctuation">)</span>

    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getUserInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> guard<span class="token punctuation">.</span><span class="token function">trackSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section></div></div><h2 id="使用内嵌模式"><a href="#使用内嵌模式"class="header-anchor">¶</a> 使用内嵌模式</h2><h3 id="普通形态"><a href="#普通形态"class="header-anchor">¶</a> 普通形态</h3><div class="custom-block hint-info"><p>点击 <a href="https://cdn.authing.co/packages/guard/ui/index.html"target="_blank"rel="noopener noreferrer">在线体验<span><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"focusable="false"x="0px"y="0px"viewBox="0 0 100 100"width="15"height="15"class="icon outbound"></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><div class="tabs-component"><div class="tabs-component-panels"><section aria-hidden="true"id="react"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// React 16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/normal/src/pages/Embed.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/normal/src/pages/Embed.tsx</span>
<span class="token comment">// import { useGuard, User } from &quot;@authing/guard-react18&quot;;</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取 Guard 实例</span>
  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
    guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userInfo<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="vue2"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/normal/src/views/Embed.vue --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="vue3"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/normal/src/views/Embed.vue --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue3&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue3&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
  guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">userInfo</span><span class="token operator">:</span> User</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="angular"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/normal/src/app/pages/embed/embed.component.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardService<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-angular&quot;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">&quot;embed-container&quot;</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">&quot;./embed.component.html&quot;</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./embed.component.css&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LoginComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> guard<span class="token operator">:</span> GuardService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client
      <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userInfo<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="cdn"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- https://github.com/Authing/Guard/tree/dev-v6/examples/guard/normal/embed.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取 Guard 实例</span>
<span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuardFactory<span class="token punctuation">.</span>Guard</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 你可以前往 Authing 控制台的本应用详情页查看你的 App ID</span>
  <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>

  <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
  <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

  <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
  <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
  <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div><h3 id="模态框形态"><a href="#模态框形态"class="header-anchor">¶</a> 模态框形态</h3><div class="custom-block hint-info"><p>点击 <a href="https://cdn.authing.co/packages/guard/ui/index.html?mode=modal"target="_blank"rel="noopener noreferrer">在线体验<span><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"focusable="false"x="0px"y="0px"viewBox="0 0 100 100"width="15"height="15"class="icon outbound"></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><p>初始化时，你需要将初始化参数的 <code>mode</code> 设置成 <code>modal</code>。</p><p>你可以通过 <code>guard</code> 实例 <code>start</code> 方法对『模态框』进行渲染，同时可以通过 <code>show</code> 和 <code>hide</code> 控制『模态框』的显示和隐藏：</p><div class="tabs-component"><div class="tabs-component-panels"><section aria-hidden="true"id="react"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// App.tsx</span>

<span class="token comment">// React 16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/modal/src/App.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@authing/guard-react/dist/esm/guard.min.css&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/modal/src/App.tsx</span>
<span class="token comment">// import { GuardProvider } from &quot;@authing/guard-react18&quot;;</span>
<span class="token comment">// import &quot;@authing/guard-react18/dist/esm/guard.min.css&quot;;</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> RouterComponent <span class="token keyword">from</span> <span class="token string">&quot;./router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GuardProvider</span></span>
      <span class="token attr-name">appId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AUTHING_APP_ID<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span>
      <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
      <span class="token comment">// host=&quot;https://my-authing-app.example.com&quot;</span>

      <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
      <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
      <span class="token comment">// redirectUri=&quot;YOUR_REDIRECT_URI&quot;</span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RouterComponent</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">RouterComponent</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">GuardProvider</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// Embed.tsx</span>

<span class="token comment">// React 16 / 17</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react/modal/src/pages/Embed.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// React 18</span>
<span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-react18/modal/src/pages/Embed.tsx</span>
<span class="token comment">// import { useGuard, User } from &quot;@authing/guard-react18&quot;;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Embed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">showGuard</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> guard<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 挂载模态框，当用户完成登录之后，你可以获取到用户信息</span>
    guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userInfo<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        guard<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>showGuard<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Show Guard
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        模态窗口打开并登录成功后会在 2 秒内调用 hide 方法关闭模态窗口，用于展示 hide 方法的效果
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">模态框自动关闭后，可以点击 Show Guard 按钮再次显示</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="vue2"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/modal/src/main.js</span>
<span class="token comment">// main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue2&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@authing/guard-vue2/dist/esm/guard.min.css&quot;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>GuardPlugin<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;modal&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
  <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

  <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
  <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
  <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue2/modal/src/views/Embed.vue --&gt;</span>
  <span class="token comment">&lt;!-- Embed.vue --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>embed-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showGuard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Show Guard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      模态窗口打开并登录成功后会在 2 秒内调用 hide 方法关闭模态窗口，用于展示 hide 方法的效果
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>模态框自动关闭后，可以点击 Show Guard 按钮再次显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">showGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$guard<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="vue3"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/modal/src/main.ts</span>
<span class="token comment">// main.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue3&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@authing/guard-vue3/dist/esm/guard.min.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">createGuard</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;modal&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
    <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

    <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
    <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
    <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-vue3/modal/src/views/Embed.vue --&gt;</span>
  <span class="token comment">&lt;!-- Embed.vue --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>embed-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showGuard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Show Guard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      模态窗口打开并登录成功后会在 2 秒内调用 hide 方法关闭模态窗口，用于展示 hide 方法的效果
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>模态框自动关闭后，可以点击 Show Guard 按钮再次显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">import</span> <span class="token punctuation">{</span> useGuard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-vue3&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token function">useGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">showGuard</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> guard<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 start 方法挂载 Guard 组件到你指定的 DOM 节点，登录成功后返回 userInfo</span>
    guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        guard<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></section><section aria-hidden="true"id="angular"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/modal/src/app/app.module.ts</span>
<span class="token comment">// app.module.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/platform-browser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppRoutingModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./app-routing.module&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./app.component&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-angular&quot;</span><span class="token punctuation">;</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    BrowserModule<span class="token punctuation">,</span>
    AppRoutingModule<span class="token punctuation">,</span>
    GuardModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      appId<span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>
      mode<span class="token operator">:</span> <span class="token string">&quot;modal&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
      <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

      <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
      <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
      <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard-angular/modal/src/app/pages/embed/embed.component.ts</span>
<span class="token comment">// embed.component.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> GuardService<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@authing/guard-angular&quot;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">&quot;embed-container&quot;</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">&quot;./embed.component.html&quot;</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./embed.component.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">EmbedComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> guard<span class="token operator">:</span> GuardService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client
      <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userInfo<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">showGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>guard<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section aria-hidden="true"id="cdn"role="tabpanel"class="tabs-component-panel"style="display:none;"><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 代码示例：https://github.com/Authing/Guard/blob/master/examples/guard/modal/embed.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">showGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>Show Guard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  模态窗口打开并登录成功后会在 2 秒内调用 hide 方法关闭模态窗口，用于展示 hide
  方法的效果
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>模态框自动关闭后，可以点击 Show Guard 按钮再次显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>authing-guard-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> guard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuardFactory<span class="token punctuation">.</span>Guard</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;AUTHING_APP_ID&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;modal&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 如果你使用的是私有化部署的 Authing 服务，需要传入自定义 host，如:</span>
  <span class="token comment">// host: 'https://my-authing-app.example.com',</span>

  <span class="token comment">// 默认情况下，会使用你在 Authing 控制台中配置的第一个回调地址为此次认证使用的回调地址。</span>
  <span class="token comment">// 如果你配置了多个回调地址，也可以手动指定（此地址也需要加入到应用的「登录回调 URL」中）：</span>
  <span class="token comment">// redirectUri: &quot;YOUR_REDIRECT_URI&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

guard<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;#authing-guard-container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 登录成功后将在 then 回调中获取到 userInfo</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo: &quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    guard<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">showGuard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  guard<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></section></div></div></div><div class="page-nav"data-v-1da1a9e6><div class="inner"data-v-1da1a9e6><a href="https://docs.authing.cn/v2/guides/app-new/create-app/create-app.html"target="_blank"rel="noopener noreferrer"class="prev"data-v-1da1a9e6>上一篇: 创建一个 Authing 应用 <span data-v-1da1a9e6><svg xmlns="http://www.w3.org/2000/svg"aria-hidden="true"focusable="false"x="0px"y="0px"viewBox="0 0 100 100"width="15"height="15"class="icon outbound"></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="/packages/guard/doc/guide/essentials/console-local-relationship.html"class="next"data-v-1da1a9e6>下一篇: 控制台配置与本地配置</a></div></div></div><div class="on-this-page"><aside class="on-this-page-navigation"><div style="display:;"><div><ul class="links"><li><a href="/packages/guard/doc/guide/essentials/mode.html#托管模式-内嵌模式"class="on-this-page-link"><span>托管模式 &amp; 内嵌模式</span></a></li><li><a href="/packages/guard/doc/guide/essentials/mode.html#使用托管模式"class="on-this-page-link"><span>使用托管模式</span></a></li><li><a href="/packages/guard/doc/guide/essentials/mode.html#使用内嵌模式"class="on-this-page-link"><span>使用内嵌模式</span></a></li></ul></div></div></aside></div></div></main><footer class="footer"><div class="content-layout-container footer-container"><a href="https://docs.authing.cn"class="footer-logo"><img width="100px"src="https://files.authing.co/authing-console/authing-logo-new-20210924.svg"></a><div class="footer-collapse"><h4 class="footer-title">用户身份管理</h4><div class="footer-collapse-content"><div class="footer-link-wrapper"><a href="/packages/guard/doc/guides/connections/"class="nav-link footer-link">集成第三方登录</a></div><div class="footer-link-wrapper"><a href="https://authing.cn/verify"rel="noopener noreferrer"class="nav-link external footer-link">手机号闪验</a></div><div class="footer-link-wrapper"><a href="/packages/guard/doc/guide/ui-components/"class="nav-link footer-link">通用登录表单组件</a></div><div class="footer-link-wrapper"><a href="/packages/guard/doc/guides/pipeline/"class="nav-link footer-link">自定义认证流程</a></div></div></div><div class="footer-collapse"><h4 class="footer-title">企业内部管理</h4><div class="footer-collapse-content"><div class="footer-link-wrapper"><a href="/packages/guard/doc/guides/app-new/sso/"class="nav-link footer-link">单点登录</a></div><div class="footer-link-wrapper"><a href="/packages/guard/doc/guides/security/mfa/"class="nav-link footer-link">多因素认证</a></div><div class="footer-link-wrapper"><a href="/packages/guard/doc/guides/access-control/"class="nav-link footer-link">权限管理</a></div></div></div><div class="footer-collapse"><h4 class="footer-title">开发者</h4><div class="footer-collapse-content"><div class="footer-link-wrapper"><a href="/packages/guard/doc/guide/"class="nav-link footer-link router-link-active">开发文档</a></div><div class="footer-link-wrapper"><a href="/packages/guard/doc/guide/frameworks.html"class="nav-link footer-link">框架集成</a></div><div class="footer-link-wrapper"><a href="https://authing.cn/blog"rel="noopener noreferrer"class="nav-link external footer-link">博客</a></div><div class="footer-link-wrapper"><a href="https://github.com/authing"rel="noopener noreferrer"class="nav-link external footer-link">GitHub</a></div><div class="footer-link-wrapper"><a href="https://forum.authing.cn/"rel="noopener noreferrer"class="nav-link external footer-link">社区用户中心</a></div></div></div><div><div class="footer-collapse"><h4 class="footer-title">公司</h4><div class="footer-collapse-content"><div class="footer-text-wrapper">400 888 2106</div><div class="footer-text-wrapper"><a href="mailto:sales@authing.cn">sales@authing.cn</a></div><div class="footer-text-wrapper text-paragh">北京市朝阳区北辰世纪中心 B 座 16 层（总）</div><div class="footer-text-wrapper text-paragh">成都市高新区天府五街 200 号 1 号楼 B 区 4 楼 406 室（分）</div></div></div></div><div class="footer-last-right-container"><p class="footer-icp-record">京ICP备19051205号</p><p class="footer-icp-record"><img src="//files.authing.co/authing-website/icon-beian-gov.png"alt="beian">京公网安备 11010802035968号</p><p class="footer-company-name">© 北京蒸汽记忆科技有限公司</p><div class="footer-social-container"><a title="GitHub"target="_blank"href="https://github.com/Authing"><svg aria-hidden="true"class="icon"></svg></a><a title="Forum"target="_blank"href="https://forum.authing.cn/"><svg aria-hidden="true"class="icon"></svg></a><a title="知乎"target="_blank"href="https://www.zhihu.com/org/authing"><svg aria-hidden="true"class="icon"></svg></a></div></div></div></footer></div></div><script src="/packages/guard/doc/assets/js/app.8e1fb774.js"defer="defer"></script><script src="/packages/guard/doc/assets/js/5.055bb98d.js"defer="defer"></script><script src="/packages/guard/doc/assets/js/6.aae15fb4.js"defer="defer"></script><script src="/packages/guard/doc/assets/js/10.72420de5.js"defer="defer"></script><script src="/packages/guard/doc/assets/js/3.94eb52bd.js"defer="defer"></script></body></html>